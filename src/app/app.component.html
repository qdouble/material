<mat-sidenav-container id="offer-site" fullscreen>
  <mat-sidenav [opened]="!mobile && !(onAdminLoginPage$ | async)" #sidenav [mode]="sideNavMode">
    <div [ngClass]="{'os-sidenav-top': !loggedIn, 'os-sidenav-top-l': loggedIn}"></div>
    <mat-nav-list>
      <ng-template ngFor let-view [ngForOf]="views" let-even="even" let-odd="odd" let-rowIndex="index">
        <a *ngIf="view.loggedIn === !!loggedIn" mat-list-item style="color: #272b27" [routerLink]="view.link" queryParamsHandling="preserve" routerLinkActive="active-link" (click)="mobile ? sidenav.close() : null">
          <mat-icon mat-list-icon>{{view.icon}}</mat-icon>
          <span mat-line>{{view.name}}</span>
          <span mat-line class="secondary">{{view.description}}</span>
        </a>
      </ng-template>
      <a mat-list-item style="color: #272b27" href="https://www.facebook.com/groups/irproofpics/" target="_blank">
        <span mat-line>
          <img style="margin-left: 5px;" width="20px" height="20px" id="fb-logo" src="assets/svg/fb-logo.svg">
            <span style="margin-left: 17px; position: relative; top: -4px;">Proof Pic Group</span>
        </span>
      </a>
      <a *ngIf="loggedIn" mat-list-item style="color: #272b27"  queryParamsHandling="preserve" routerLinkActive="active-link" (click)="logout(); mobile ? sidenav.close() : null">
        <mat-icon mat-list-icon>close</mat-icon>
        <span mat-line>Logout</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-toolbar color="primary" id="os-toolbar">
    <button style="top: 2px;" mat-icon-button (click)="sidenav.toggle(); toggleMobile()">
      <mat-icon style="color: white">menu</mat-icon>
    </button>
    <img id="level-menu-logo" src="assets/svg/lr-new-logo-1.svg">
    <div *ngIf="!(onAdminLoginPage$ | async)" class="os-toolbar-right">
      <span class="notifications"  osClickOutside (clickOutside)="showNotifications = false">
        <button *ngIf="loggedIn" mat-icon-button color="primary" (click)="showNotifications = !showNotifications">
          <mat-icon style="color: #ffffff;" >notifications</mat-icon>
        </button>
        <button *ngIf="loggedIn" mat-icon-button color="primary" [routerLink]="['/support', {help_toolbar: true}]">
          <mat-icon style="color: #ffffff;" >help</mat-icon>
        </button>
        <div class="ntfy-count-circle" *ngIf="(unreadNotificatonPendingTotal$ | async) || (unreadNotificationTotal$ | async)" (click)="showNotifications = !showNotifications">
          <div class="ntfy-number">{{((unreadNotificatonPendingTotal$ | async) || (unreadNotificationTotal$ | async)) | showMax: 99}}</div>
        </div>    
      <div class="ntfy-nub" *ngIf="showNotifications"></div>
      <div class="ntfy-drop" *ngIf="showNotifications">
        <div class="ntfy-drop-top">
          <div class="ntfy-label">Notifications</div>
          <div class="ntfy-options" (click)="markAllNotificationsAsRead()">Mark all as read</div>
        </div>
        <os-notifications-dropdown></os-notifications-dropdown>
        <div class="ntfy-drop-bottom">
          <div class="ntfy-see-all" [routerLink]="['notifications']">See All</div>
        </div>
      </div>
      </span>
      <button *ngIf="loggedIn && false" mat-icon-button color="primary" (click)="null">
        <mat-icon style="color: #ffffff;" >mail</mat-icon>
      </button>
      <div class="ntfy-messages-circle" *ngIf="unreadMessageTotal$ | async">
        <div class="ntfy-number">{{unreadMessageTotal$ | async}}</div>
      </div>
    </div>
  </mat-toolbar>
  <mat-card fxLayout="column" id="my-page-card">
      <div *ngIf="loggedIn && showStatus" fxLayoutAlign='end end' class="status-bar">
        <div id="status-back">
          <div>
            <em>Level: <b>{{creditTotal | floor }} = ${{(creditTotal | floor) * 5 }} max/referral</b></em><div id="level-bar-back"><div class="level-bar" [style.width]="85 * (creditTotal / 100) + 'px'"></div></div>
          </div>
          <div>
            <img id="credits-symbol" src="assets/svg/credits-symbol.svg"><em>Credits:</em> <b>{{creditTotal | number: '1.2-2' }}</b> | <img id="earnings-symbol" src="assets/svg/earnings-symbol.svg"><em>Earnings:</em> <b>${{amountPaid$ | async}}</b>
          </div>
        </div>
      </div>
      <router-outlet (activate)="activateEvent($event)" (deactivate)="deactivateEvent($event)"></router-outlet>
  </mat-card>
</mat-sidenav-container>
<os-store-devtools *ngIf="showMonitor"></os-store-devtools>
